{"data":{"post":{"id":"a30e481f-06a0-537a-b6c0-bab1d418c040","html":"<p>Some time ago, I've purchased a <a href=\"https://www.raspberrypi.org/\">Raspberry</a> Pi3 in <a href=\"https://www.amazon.com/\">Amazon</a>. I've\nbeen using it for a while as <a href=\"https://about.gitlab.com/\">Gitlab</a> <a href=\"https://docs.gitlab.com/ee/ci/\">CI/CD</a>\nrunner, along with <a href=\"https://www.docker.com/\">Docker</a>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7f24311511a1e37c44fb21abf12f8cb/5a447/IMG_0533.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgQA/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAGSidhrHWf/xAAaEAACAgMAAAAAAAAAAAAAAAABAgARAxIT/9oACAEBAAEFAkALMtDVpjNMzkzpU//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQMBAT8BR27f/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABkQAQACAwAAAAAAAAAAAAAAAAABERAhMf/aAAgBAQAGPwKmsQqXH//EABoQAAMBAAMAAAAAAAAAAAAAAAABESExUXH/2gAIAQEAAT8hQNaIXxp4lAuyk6ovA//aAAwDAQACAAMAAAAQbD//xAAYEQADAQEAAAAAAAAAAAAAAAAAARExYf/aAAgBAwEBPxCJMHyj/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhEf/aAAgBAgEBPxBJlIf/xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMVFhgf/aAAgBAQABPxBZaqLrWNCUgt79yGgZ7SmISKDuN2R8ZKSYFb3P/9k='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"My raspberry Pi3\"\n        title=\"\"\n        src=\"/static/f7f24311511a1e37c44fb21abf12f8cb/894f1/IMG_0533.jpg\"\n        srcset=\"/static/f7f24311511a1e37c44fb21abf12f8cb/c2a8c/IMG_0533.jpg 148w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/ba063/IMG_0533.jpg 295w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/894f1/IMG_0533.jpg 590w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/ac96f/IMG_0533.jpg 885w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/eedfb/IMG_0533.jpg 1180w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/a53c3/IMG_0533.jpg 1770w,\n/static/f7f24311511a1e37c44fb21abf12f8cb/5a447/IMG_0533.jpg 5184w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Time to time, I may post how to do it some day. The point is that, I wanted a\n3D printing server that supported webcam. The options were:</p>\n<ul>\n<li><a href=\"https://www.repetier-server.com/\">Repetier Server</a></li>\n<li><a href=\"https://www.astroprint.com/\">Astroprint</a></li>\n<li><strong><a href=\"https://octoprint.org/\">OctoPrint</a></strong></li>\n</ul>\n<p>For the first, Repetier Server offers a lot of stuff, and I like the interface,\nas I've been using for a while in the past <a href=\"https://www.repetier.com/\">Repetier Host</a> (Which\nresembles to it). The problem is that there was a paid plan that offers the full\nsuite, maybe some day I'll give it a try.</p>\n<p>The second option, Astroprint seems very cool, and a perfect fit for my local\nprinting server, but they offer (apparently) only the pre-built image. I didn't\nwant to lose everything in my current server, so that option was discarded.</p>\n<p>Finally, I've found <a href=\"https://octoprint.org/\">OctoPrint</a>, and <a href=\"https://discourse.octoprint.org/t/setting-up-octoprint-on-a-raspberry-pi-running-raspbian/2337\">installation</a>\ninstructions for already running raspberries, perfect! Keep in mind that this is\ndone on an already working Raspberry Pi with static IP and all that stuff.</p>\n<p>We'll go through three steps:</p>\n<ul>\n<li><a href=\"#first\">First: Setup Nginx</a></li>\n<li><a href=\"#second\">Second: Setup OctoPrint</a></li>\n<li><a href=\"#third\">Third optional: Setup motion</a></li>\n</ul>\n<p><em>Note</em> that if you want only the print server and you don't care that uses the\nport <code class=\"language-text\">5000</code>, or you're brave enough to set it to the port <code class=\"language-text\">80</code> you can skip\nthe first and the third step and go to the OctoPrint setup directly. Although\nI personally recommend using some reverse proxy at least.</p>\n<p><a id=\"first\"></a></p>\n<h1>First: Setup Nginx</h1>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e981446f3e8d31e4c494eeb1cb1679a4/d48d2/nginx-logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 21.405405405405403%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAJQDAACUAwGmQXXKAAAA00lEQVQY0yWQvQ4BQRSFh3fAO2gktrPRKMUsGs3WVKIhEVGgICEiKp1SsbOhWNnQ+SmsQtQKr6DXCN/YSb6cc+6dO7kZIRy5F0p2hD6OnOCzaAUucISqUFaOeh8/hzg5IRzrCnXYkqNg4339yJ3LL4IempKHNBXZwGdgBBJqsIMUfY/+G/LMNMlPCPCGfvCMKf23UfIWbmmt8Db4ZL1JG+3BBh7kBiyhSDaFV/6iJ+YiIjQyBmn4gEmjRX2Nd6FLLqBjage8G36PtYAB9QBNUp/pzX9tSnP5XbcvwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Nginx Logo\"\n        title=\"\"\n        src=\"/static/e981446f3e8d31e4c494eeb1cb1679a4/ad1cb/nginx-logo.png\"\n        srcset=\"/static/e981446f3e8d31e4c494eeb1cb1679a4/1640f/nginx-logo.png 148w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/ff46d/nginx-logo.png 295w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/ad1cb/nginx-logo.png 590w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/2a252/nginx-logo.png 885w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/aa375/nginx-logo.png 1180w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/c8b45/nginx-logo.png 1770w,\n/static/e981446f3e8d31e4c494eeb1cb1679a4/d48d2/nginx-logo.png 1850w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a>\n<small>Image source: <a href=\"https://www.nginx.com/\">nginx.com</a></small></p>\n<p>While in the <a href=\"https://discourse.octoprint.org/t/setting-up-octoprint-on-a-raspberry-pi-running-raspbian/2337\">official setup page</a> you'll find that they used\n<a href=\"http://www.haproxy.org/\">haproxy</a>, I've preferred skipping over that part and setting up my own\nNginx, for later use with more servers and also for sake of experimenting.</p>\n<p>First, we need nginx in our system:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx</code></pre></div>\n<p>Now, we'll remove the default file link in <code class=\"language-text\">/etc/nginx/sites-enabled</code>, you'll\nsee a link called <code class=\"language-text\">default</code>, remove it.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> /etc/nginx/sites-enabled\n<span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> default</code></pre></div>\n<p>At this point your Nginx does not have any site configured, let's make one!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> 3d-printer.conf</code></pre></div>\n<p><strong>Note</strong>: If you're using something like <a href=\"https://www.bitvise.com/ssh-client\">Bitvise SSH client</a> for windows\n(like me), then you can do instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">touch</span> 3d-printer.conf\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> <span class=\"token variable\">$USER</span> 3d-printer.conf</code></pre></div>\n<p>Then open it with your favorite editor (Don't use Window's Notepad! New lines\nwill be ignored and you'll see a one line file).</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0fb12c1c04e6bddea64c4b3acc8bce39/5e855/edit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 530px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.15094339622642%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACa0lEQVQ4y5VUy3LTQBD0/1dx4C+4cOWUQ6gKccAkdpJyHL1fq/fqaVkStuRmdh0loSgCTNWUtNKqt3umR7Pv6gLzxyvKOe6tNfIso0yQ5/lzFkXxy/olM2iahpRzNNstGC8w+2ZewPDuYFpfEPMIim0hdG2kaQrGfIRBCM/zJMA4HjEMAw6Hg8z9fo+u69B3LfwoxUKPMFurJu7MGHayhZPUaLseXU8b2xZN06Dve0RRBN/3EcexBCiLErZtQ1M1lGUpFViGCZdAZ0szxfvPEd6dMXxcMMlMAI3j+MymqirJNCFAzjPUVQ2ecrnOxLreSsnNYcTsR99BxEpNsNFDMMciNgEyqqVg1nan9wJUHPJW7ATgjqSJ0FkO1RbSGHxiw0iiaVEtiYGInGSJmok4Ho+/JT09AXZPDPKiRppkcC2qBTXG91w4lgHXsTHse9RlIeVPgK9jWkvASVLAK9wZIeYrBUuNYaX7tA5w/eji1ojwSOz/CXCSvFBCfDhf49O1jSu2x6XT4dLtMHd7uva4UBIC3P8dcJKcZRViaY2EunvAcRyoCZTUafoCFdnjdQ3/LPmJYVkxJAmDSX4SrMUmYRuR4r7436bEpgFP18EzmognsMmL4gNh4GF42zYtiZkJQ+52DTTdI3Y2AvKgaJQAm0ZMAHKa17LI0O7IwHWFbV2ToWt5kMi6KpE3LWbz5Qo3qyUcl8n6qYpK08Kphi+AArzIOM4XCs6+rnF1b+DmdoPNwwMsy5LJXPc0eorNyMQMuuXRZCQ0YgGdWEmpomYixX1Bf5aNFWNtRjB9DoeFCGhvnp/+RDWxDLMCPwFtt3RQdjtyqgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Bitvise\"\n        title=\"\"\n        src=\"/static/0fb12c1c04e6bddea64c4b3acc8bce39/5e855/edit.png\"\n        srcset=\"/static/0fb12c1c04e6bddea64c4b3acc8bce39/795b4/edit.png 148w,\n/static/0fb12c1c04e6bddea64c4b3acc8bce39/de719/edit.png 295w,\n/static/0fb12c1c04e6bddea64c4b3acc8bce39/5e855/edit.png 530w\"\n        sizes=\"(max-width: 530px) 100vw, 530px\"\n      />\n  </span>\n  </a></p>\n<p>Notes aside, if you don't want to use external tools or you're using the\nterminal or whatever, just edit with nano as said before. You can also skip the\nsteps and go directly to the <a href=\"#copy-paste\">copy-paste snippet</a></p>\n<p>First, we'll add the server directive on our enabled site:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\"># This contains our setup.</span>\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then, we'll place our octoprint (Which will be running under the port 5000) at\n<code class=\"language-text\">/octoprint</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\"># This contains our setup.</span>\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\"># Octoprint host</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>octoprint<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now, add some headers in order to make OctoPrint run fine (Some features like\nsockets might fail if not):</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\"># This contains our setup.</span>\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\"># Octoprint host</span>\n  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>octoprint<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$http_host</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">\"upgrade\"</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Scheme <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Script<span class=\"token operator\">-</span>Name <span class=\"token operator\">/</span>octoprint<span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_http_version</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">client_max_body_size</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n</span>  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Finally, this step is totally optional: Add the webcam proxy (Only if you add\na webcam at the end!):</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\"># This contains our setup.</span>\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\"># Octoprint host</span>\n  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>octoprint<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$http_host</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">\"upgrade\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Scheme <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Script<span class=\"token operator\">-</span>Name <span class=\"token operator\">/</span>octoprint<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_http_version</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">client_max_body_size</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">#OPTIONAL WEBCAM</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>webcam <span class=\"token punctuation\">{</span>\n</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8081</span><span class=\"token punctuation\">;</span>\n</span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span>\n</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><i id=\"copy-paste\"></i>\nThe CopyPaste™ snippet here:</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token comment\">#######################################</span>\n<span class=\"token comment\"># 3D Printer proxy config.</span>\n<span class=\"token comment\"># Webcam streaming and printing.</span>\n<span class=\"token comment\">#######################################</span>\n\n<span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\"># webcam port, optional.</span>\n  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>webcam <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8081</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>octoprint<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token operator\">/</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$http_host</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">\"upgrade\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Scheme <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Script<span class=\"token operator\">-</span>Name <span class=\"token operator\">/</span>octoprint<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">proxy_http_version</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">client_max_body_size</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And we're done! just start or restart the service (You'll do this again\nlater...)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx start <span class=\"token comment\"># or restart</span></code></pre></div>\n<p><a id=\"second\"></a></p>\n<h1>Second: Setup OctoPrint</h1>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af66ea3519a3d44f722721b2f650b993/5329d/octoprint-logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 249px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 80.32128514056224%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAFxEAABcRAFraoDIAAAD5klEQVQ4y21TbUxbZRR+bltARqUf9962Y5CJURMT435gJGoWNyNm7I/R+GNqZnRZMqMuYctcDIkhLE7MkDkx2QibLsgo4IAB1XVQ6AdtAdkY8rUJKwNE5jY3FM3GR3vf13NvC5vJ3uTkvu+55znvOed5XoCW1R83tJG1Q1B9OIZUOPHmQyfQK1dgWT6KKO37ybcdVTCqIcZOiq2IY0U/4svaRQcf9HIjIAUEg+asgW332HvDw3yAF0R28vQasPRqsPfH3uYj5Ns7vmsMTchSQ9d2JRukBsrhhV7N9cCVGVqzc4pHuDLNl+bu3I493iMxW1DP5hbmYsuTyuItfoM/2m3Z+0DwGg7BGkSxNYA+MYRjpkNIlsawoaj3EyXvpVfYkfOHlIxQChMDYGX9nyv5eVuV4nAhfyxifl7FE6ZcxVJ1JaY/kQSxA99SyQtSFabkHnAxiF410HQS9U+1ZvCMlpTl9B4wcx+Yvdmw/HRrJqd/P2nJgvDKP4MTdkY6jbuiB9WQmvDbulyY1u6ARS7HTfk8Je3Dp488mSRb6vGP+TtwY65OMeboFPNxgZNvMetVQxbFFKix8jeYd+yGYz2QQoVdhujCxyvt28pQZqsFt/oQFf1CpdyBaQTA96QhVqiDAg9d1olZySccJ2YXbPXghKlYwYst+AjmERhok6w53NgmU0IqPyZS+/aQgecP5ilft+xnR5sL2RvDr7PMcCq30D+pETG5ji5wY4eKlX6AwdJPM9QS+aHJhcg5YaOK5GosmTyIbr3wMvtyuJzVzrqZk+zwr+XsnaG3mOTVRSUnlmyd1E0QpzRsALq4Dj33DqTHHAqYJkb5ene6ssWzmZUOfcWcU2dYLdnBkRK2qetZ5mhLUqhllcBrNJ4XEo9DJ7aviNsffx0kznVE/6gUFrjtnEHZ5HuOlURKlVMTDbxmopGXRo4om8O57OE2KCQXTrEThM1OVCisapGceu0bwgf2iwI3V4HnuJ6Ivtu1K1Y0UsTrLp9ZrBttXjhwqZjvGSiIveh+Jmo+CeYYFNSW9yW6M1j99xJqyzIEi61J/1maC1c2Dm7g3w+7ubO/+4/xW393XLk973FHLs62zfTw10a38FQXJu2Nhi+sfbAnuhP+92Ks4fgcTVwwSl5hPq0S3U0jzfsikXPerl/6z/ZcGnddv94eDF8NHkivhJcexB3xmt6WIFPDSr77KiSmNadlADl2kkXKfuSr59+vyrHozWz+70w2v/uXg3MOMz7ERoePZngBeauEeLU5JhIG4kkzHQmBelBPqp+xnhacVYNJB/kNYyNZa8toymG5QaiRGzBJjP54HwerY/sP+jnIJIqnBZcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Octoprint setup\"\n        title=\"\"\n        src=\"/static/af66ea3519a3d44f722721b2f650b993/5329d/octoprint-logo.png\"\n        srcset=\"/static/af66ea3519a3d44f722721b2f650b993/81e3a/octoprint-logo.png 148w,\n/static/af66ea3519a3d44f722721b2f650b993/5329d/octoprint-logo.png 249w\"\n        sizes=\"(max-width: 249px) 100vw, 249px\"\n      />\n  </span>\n  </a>\n<small>Image source: <a href=\"https://octoprint.org/\">octoprint.org</a></small></p>\n<p>First, we'll need Python 2.7 and pip, we'll install only <code class=\"language-text\">python-dev</code> and\n<code class=\"language-text\">python-pip</code> (Python 2.7 should already be installed, do so if not.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> <span class=\"token comment\"># Go home!</span>\n<span class=\"token function\">sudo</span> apt update\n<span class=\"token function\">sudo</span> apt <span class=\"token function\">install</span> python-pip python-dev python-setuptools python-virtualenv <span class=\"token function\">git</span> libyaml-dev build-essential\n<span class=\"token function\">mkdir</span> OctoPrint <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cd</span> OctoPrint\nvirtualenv venv\n<span class=\"token function\">source</span> venv/bin/activate\npip <span class=\"token function\">install</span> pip --upgrade\npip <span class=\"token function\">install</span> https://get.octoprint.org/latest</code></pre></div>\n<p><small>Original source: <a href=\"https://discourse.octoprint.org/t/setting-up-octoprint-on-a-raspberry-pi-running-raspbian/2337\">octoprint.org</a></small></p>\n<p>Then, we should add our user to the <code class=\"language-text\">dialout</code> and <code class=\"language-text\">tty</code> groups, or you'll have a\nbad time with serial port errors, this is <strong>critical</strong>!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -a -G <span class=\"token function\">tty</span> <span class=\"token variable\">$NAME</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -a -G dialout <span class=\"token variable\">$NAME</span></code></pre></div>\n<p><strong>Note:</strong> The original source uses the <code class=\"language-text\">pi</code> user, but mine is not <code class=\"language-text\">pi</code> so better\nensure that you're using the proper user. That's why I use <code class=\"language-text\">$NAME</code>.</p>\n<p>Now download and place the init scripts in their proper location:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://github.com/foosel/OctoPrint/raw/master/scripts/octoprint.init\n<span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> octoprint.init /etc/init.d/octoprint\n<span class=\"token function\">wget</span> https://github.com/foosel/OctoPrint/raw/master/scripts/octoprint.default\n<span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> octoprint.default /etc/default/octoprint\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x /etc/init.d/octoprint</code></pre></div>\n<p>Now ensure that the file <code class=\"language-text\">/etc/default/octoprint</code> has properly configured the\npaths, mainly the user (You'll see lots of <code class=\"language-text\">pi</code> user by default!).</p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre class=\"language-properties\"><code class=\"language-properties\"><span class=\"token comment\"># Configuration for /etc/init.d/octoprint</span>\n\n<span class=\"token comment\"># The init.d script will only run if this variable non-empty.</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token attr-name\">OCTOPRINT_USER</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">&lt;your-user></span>\n</span>\n<span class=\"token comment\"># base directory to use</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token attr-name\">BASEDIR</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/home/&lt;your-user>/.octoprint</span>\n</span>\n<span class=\"token comment\"># configuration file to use</span>\n<span class=\"token comment\">#CONFIGFILE=/home/pi/.octoprint/config.yaml</span>\n\n<span class=\"token comment\"># On what port to run daemon, default is 5000</span>\n<span class=\"token attr-name\">PORT</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">5000</span>\n\n<span class=\"token comment\"># Path to the OctoPrint executable, you need to set this to match your installation!</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token attr-name\">DAEMON</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">/home/&lt;your-user>/OctoPrint/venv/bin/octoprint</span>\n</span>\n<span class=\"token comment\"># What arguments to pass to octoprint, usually no need to touch this</span>\n<span class=\"token attr-name\">DAEMON_ARGS</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">\"--port=$PORT\"</span>\n\n<span class=\"token comment\"># Umask of files octoprint generates, Change this to 000 if running octoprint as its own, separate $</span>\n<span class=\"token attr-name\">UMASK</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">022</span>\n\n<span class=\"token comment\"># Process priority, 0 here will result in a priority 20 process.</span>\n<span class=\"token comment\"># -2 ensures Octoprint has a slight priority over user processes.</span>\n<span class=\"token attr-name\">NICELEVEL</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">-2</span>\n\n<span class=\"token comment\"># Should we run at startup?</span>\n<span class=\"token attr-name\">START</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">yes</span></code></pre></div>\n<p>Make you sure that the file looks like the above, replace <code class=\"language-text\">&lt;your-user&gt;</code> with\nyour real user name (Eg <code class=\"language-text\">pi</code>), you can look at your console if you're not sure:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2dbd6f4240f452b981eb43398365b65/b3cdc/user-at-console.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 292px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 26.36986301369863%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAC4jAAAuIwF4pT92AAAApklEQVQY06WP2wqCUBBF90k8WaaURWI37UJeEqNe6iNCCP//W3ZTIQn55sNiOHvOXjA4phfusyuV5RJAd9Lixjgp6AeaoxnoeuBkCeqVLOWNQLCFOajGoKm1FIfcbXNW1fMjUUr9hNn5ziTOGUYGvQ049cHgAFqxLBfCWhARQimK3Bo4UrQZRSeW5eNfWJ9s9h0qCXrvD11OroWG7XwD1QIas4FqyV6BO262kKbZlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"User and host name\"\n        title=\"\"\n        src=\"/static/d2dbd6f4240f452b981eb43398365b65/b3cdc/user-at-console.png\"\n        srcset=\"/static/d2dbd6f4240f452b981eb43398365b65/ba167/user-at-console.png 148w,\n/static/d2dbd6f4240f452b981eb43398365b65/b3cdc/user-at-console.png 292w\"\n        sizes=\"(max-width: 292px) 100vw, 292px\"\n      />\n  </span>\n  </a></p>\n<p>Check that you're not leaving any of those important lines commented (Starting\nwith <strong>#</strong>).</p>\n<p>Now add the script to autostart with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> update-rc.d octoprint defaults</code></pre></div>\n<p>And start your daemon!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> octoprint start</code></pre></div>\n<p>Go to the port <code class=\"language-text\">5000</code> of your raspberry pi's IP.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8feeb6025ca729b895cc04ed839b3fcf/f174b/final-octoprint.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.9500531349628%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACM0lEQVQ4y3VTy5KbMBDk0/MV+YpU7jkn12zlEO9my4XNLtgGbBB6IolHZwaDs5dM1ZSe0zPTaiW7t9942T3jcEhRVRXKsnw4rz96vXpVletY4XQ6Ic9zpGmK4zFD0rsewkW4OGIcBwzDP7fWQkkJ7TxUHyBdQGM8jA9orUeMA8b17jiOmKYJiaCAS6vgCJg353lenK3ve2it4Wi0dG6cI+/RUwJLzuebOzrjMeFJ2wp0QiyZ2DZArpDPl/XiQBwDalfBRoN5oo3pfp9j+W7CFdxut0emjxVuWdkMATT+hq7vsBevqE2FLnQQvl3uc3dLhQxYFCcYY4mP8b+AgSor7RlHk+L9miJTB+Tmjbi3mGbib5zugL4n4sWVwAKROq/k3oEZ0PV+bRlUYYO9ekXnFTKT4Z0AeZ8fg1teALPS4+v3FrtUQCvispNommYBZkBvNZYo5jRKnF2OMBjcfIkmXHE37mqC9wRYVB1+7iWECrBGo65rKKUQQsBAMkqfMhz2F+THG9KXAs/7FGVxRpbTXiFQXxzq0uJcaIjWIJm5vSmCn2uk0mOMSwubhKSKlIQrN7heFanBoCXXmiQliS7lIDvWqyNVUIWD99D0yrZt4Ug6gXjw3j+A2ZhTKbtH60K0pEeKC9MqL06glnmy6Wf7GYJAxapJXjP4xievtTFQXYMfv2p8+lKgox+jKVlV1ZRUUsurRD7a9mqGghmQ19tv4B9l6PGe/jT4/K2C7uPCPWuZuf8LmVToaAMAKRQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Octoprint\"\n        title=\"\"\n        src=\"/static/8feeb6025ca729b895cc04ed839b3fcf/ad1cb/final-octoprint.png\"\n        srcset=\"/static/8feeb6025ca729b895cc04ed839b3fcf/1640f/final-octoprint.png 148w,\n/static/8feeb6025ca729b895cc04ed839b3fcf/ff46d/final-octoprint.png 295w,\n/static/8feeb6025ca729b895cc04ed839b3fcf/ad1cb/final-octoprint.png 590w,\n/static/8feeb6025ca729b895cc04ed839b3fcf/2a252/final-octoprint.png 885w,\n/static/8feeb6025ca729b895cc04ed839b3fcf/f174b/final-octoprint.png 941w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><a id=\"third\"></a></p>\n<h1>Third and optional: Setup motion</h1>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d51da250a412fbae08080a79c6f884d8/19de7/motion-logo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 140px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAABoklEQVQoz42SW0sbURSF5z9KHwqCLxWpFZqXog9aNNhWxWpvEBPRMQFD0eBtjBcSbEgZa0PQxHhNjJqYTKI1rQUfvGTmc5wxMgYsXbDZi7PXPmdz1hY0TeOxuMVtLpfLeqg8hopWJwiqqqKq2l2jyc2sGvlerGN5Jc6zxk5qnrbQZOthWgoZdfMO80GB/8DIqJ+6ejtPalvp++JDHF3ks2uKhpe9pA+UB1phezdDKp1DKZwSWIqyf6gwOfudSHQbeSXB2noKz9cAXl+IkLxBMByjo8eDyy0xF4zo9T0Sm2myR8fGtEKD7T3Nr514x4LYu91MzIQZ8viJ6Rd9dPgIy3GmF37SYhd52z/G+IyMrXWYrk+TON1+pIUf1NS20f3Ba054mC1SKJ6SV34hzS/rvMTxyR8uLi4JfIuyk8w8+Pz2dyIvmp286R83zq6urlmNJYkn9v79hxUvsvkSz185iCVSdHSJHOWLDHoWGRDnjLrVfc3qsulu+c41M3QJZ3/PcbgD+CSZ4slvo3ErqZDJlQxubIPV5eqds66JlVdQPVG17gbDX4j41cBX2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Motion capture tool\"\n        title=\"\"\n        src=\"/static/d51da250a412fbae08080a79c6f884d8/19de7/motion-logo.png\"\n        srcset=\"/static/d51da250a412fbae08080a79c6f884d8/19de7/motion-logo.png 140w\"\n        sizes=\"(max-width: 140px) 100vw, 140px\"\n      />\n  </span>\n  </a>\n<small>Image source: <a href=\"https://motion-project.github.io/\">motion-project.github.io</a></small></p>\n<p>The <a href=\"https://discourse.octoprint.org/t/setting-up-octoprint-on-a-raspberry-pi-running-raspbian/2337\">original setup</a> instructions use a <a href=\"https://github.com/jacksonliam/mjpg-streamer\">mjpg streamer</a>\nfork, but I had some troubles and decided to go with <a href=\"https://motion-project.github.io/\">motion</a>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba6995b74b3ab32feb4032b4e222cc73/5a447/IMG_0538.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABX0T1MXzIz//EABwQAAEDBQAAAAAAAAAAAAAAAAEAAxMCBBIhIv/aAAgBAQABBQK3EdLTuZUexy6v/8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQMBAT8Bp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAEFAQAAAAAAAAAAAAAAAAABEBESMWH/2gAIAQEABj8CWws42kdb/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIRAx0f/aAAgBAQABPyHqgVj1QBx434QoXyLn/9oADAMBAAIAAwAAABC03//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EAI//8QAFREBAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQIBAT8Qh//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExYVGB/9oACAEBAAE/EGAqM0jrv2YbOXbjmIYv2CG0mz3UFRP/2Q=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"My webcam\"\n        title=\"\"\n        src=\"/static/ba6995b74b3ab32feb4032b4e222cc73/894f1/IMG_0538.jpg\"\n        srcset=\"/static/ba6995b74b3ab32feb4032b4e222cc73/c2a8c/IMG_0538.jpg 148w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/ba063/IMG_0538.jpg 295w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/894f1/IMG_0538.jpg 590w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/ac96f/IMG_0538.jpg 885w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/eedfb/IMG_0538.jpg 1180w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/a53c3/IMG_0538.jpg 1770w,\n/static/ba6995b74b3ab32feb4032b4e222cc73/5a447/IMG_0538.jpg 5184w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Install is straightforward, as docs say:</p>\n<blockquote>\n<p>Motion is part of the Debian, Ubuntu and Raspbian repositories and can be\ninstalled with the apt tool.\n<cite>Motion Project Docs</cite></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> motion</code></pre></div>\n<p>Then, start the motion service!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> motion start</code></pre></div>\n<p>If everything is running properly, you should be able to see the stream at\nport <code class=\"language-text\">8081</code> of your raspberry and the built-in web interface at <code class=\"language-text\">8080</code>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25ecd8dda69a1adc4a6a6433ba1389bf/3e116/your-webcam-stream.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 355px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 107.6056338028169%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEuklEQVQ4y5WUaWxUVRTHJ4YCXWam09k7y3uzTzvTWbvSoQW7p9O9nbZUKBKBAjEahRg+GOWjiUYNJBi/iCAJRkP8AgFMNEEB5YuJRREFNASttGFLQWX9ed9MiwSJiS/vn/veOff+3nn3nnNUiUQlsViCVKqBnp4+urp6Gc6MZjUwkGFwYIi+vkG6u3tpa22npaWNjo5O0uluhodH6e8fzK5TGApLNQ+sr1+aXZRO97JiZIyx0ZVkhkYZyYwwNDhMT3cfrQLW3NxKZ2dXFjg4mKG3t/8BMB5PKsAqksmqLF0xKIpE40IxomLMKhYnJuzKnIfnKT4FpGieoQoEgjyqYLBsTuL5Mf7/kkqWZf6PXPNyuR7rVymOR+V+nM3tzkqegymSJOlf87JA2ZWjZxe4ZSTlfQ6SnShGh9OBzV4qbK4HkSpb8uhHssBiix61vRhzwIYc8eOMe7FX+2lrb8VTWYYpIVHflGLrpi3s3fEBB3Yd5uPtB9m65RXyC/JRqzX4/OU4ZWcOqDbrKHBqKYnZsMRFBHEPgeoyGpfUIVX6sdZ4aEm3MDGylufGX2D3m3u5cHKG9rZOVCoVhUVqkvEa/L5gDqgxF1Mk6TAn3VhqvNjqfEgJ8VxqRK7wYU3IZIaH+OytTzhz/Af27NzDxrUbxYfdLNIuRKfT01jfRjScnIvQpM0CTQkXlioP9toAckMIucpPaVTClyrn5JHj/HnqGlcuXoW/YN/7+1hQuBCNRY3BYKQrPU57eyYHLBLAAocWU9SJtdKFo9qHXBPAWx9GU25k22vb4AZcvjDD5MlJLp2b5uzkWYKJIHnFeXjdAbraMiI7vHMRGrXkl6oxRu3YklL2QOQlIfQRG6n0Mq7PXOfW9VtwG85/d55Lv0wzdXaKic0bUBWqCPljrOh5Gp/H/xDQVIg+bMUigD4RnRwyEWso44uDnzN1+iLnTv3EvZv3uP/Hfa5dusb0hWlOHDuOvlRP0BdhzfCzlAfC/wAXGwooCVixJey4PIsZGWri9KFvmPr2N7a//jZ3btzh7o27IAJVNHt5ltnpWRpTywl4wgy3juKWPXN7aFCzqGQxuoCRUJmWzevX8f3hc5zY/zUf7djFqrFBlEuJEHHfvin+/T78OHlG5J+HSCBGunmASDghgCLT1UYNC7R5LDCo6G9q4ei7X/J8xxCbuptYLRK6e3kVnx44yFdHj3H19ytM/fwrM1PTrF6/kryiJ5DsMi9tfoM14y+icnvcBEJhjBYjDTUNrO2foCnkZanXQHvATpVUTK2rkA0bx/hw727ee2cnR/YfYuKZcaySmhJDEcXFanEgQXzeACqv14e3PEg8WkVHew/WoAmzX4dL5J8cE3Vd4RDlaMMhUuqpdavY9urLrBjNEE/GSFZHsdhLRO07aXiymeraelQerxezZKHQVES+R4smbMEYsWMWKVSadGEWVWIUMHNcRltuRuctJt+wEFOZldKwA6vLilsEVbdkGZFYZa4faswisS1FaL16dGVmSoJWTCEHlgoJa4WMOSSAYZGjcUmMFvTOEjRiS0KpCMtal1NblyJV3yja2VxzcLlzyrYxt5wb59uaYs/qIZ+cs0uyKAKH/UH7kiWZvwHZnw7WyOaAjgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Stream example\"\n        title=\"\"\n        src=\"/static/25ecd8dda69a1adc4a6a6433ba1389bf/3e116/your-webcam-stream.png\"\n        srcset=\"/static/25ecd8dda69a1adc4a6a6433ba1389bf/cda4b/your-webcam-stream.png 148w,\n/static/25ecd8dda69a1adc4a6a6433ba1389bf/37997/your-webcam-stream.png 295w,\n/static/25ecd8dda69a1adc4a6a6433ba1389bf/3e116/your-webcam-stream.png 355w\"\n        sizes=\"(max-width: 355px) 100vw, 355px\"\n      />\n  </span>\n  </a></p>\n<p>Remember that if you run into problems with motion you can always check out\n<a href=\"https://motion-project.github.io/motion_guide.html\">the official guide</a> to see what happens. Also you can stick to\nthe <a href=\"https://octoprint.org/\">original method</a> that uses mjpg project.</p>\n<h2>Finally</h2>\n<p>Now you should be able to restart your <strong>nginx</strong> process with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx restart</code></pre></div>\n<p>And at the port <code class=\"language-text\">80</code> (Default for web, no port) you should be able to access to\n<code class=\"language-text\">/octoprint</code> and <code class=\"language-text\">/webcam</code>!</p>\n<p>Thanks for reading and don't hesitate to comment if something does not run or\nI've missed any step.</p>\n<!-- ### Now my personal sadness box\n\nAs I've mentioned in [my twitter][tweet] and [my instagram][insta], _\"recently\"_\n(Well... some months ago...) I've acquired a Bowden extruder, because the\noriginal extruder sadly stopped working properly. By the way, at the time I've\nbought this extruder, I didn't know that the official model was a [e3d v6][e3d6]\n, so probably I bought a replica that is [giving me some headaches][sadness].\n\n![The extruder](../images/posts/12-12-2018-octoprint-nginx-motion/IMG_0534.JPG)\n![The extruder](../images/posts/12-12-2018-octoprint-nginx-motion/IMG_0536.JPG) -->\n<!--\n  Links\n  12-12-2018-octoprint-nginx-motion\n-->","excerpt":"Some time ago, I've purchased a  Raspberry  Pi3 in  Amazon . I've\nbeen using it for a while as  Gitlab   CI/CD \nrunner, along with  Docker . Time to time, I may post how to do it some day. The point is that, I wanted a\n3D printing server that…","meta":{"title":"How I'd got OctoPrint + Webcam running in my Pi3","tags":["lifestyle","3d-printing","diy"],"date":"December 12, 2018 at 13:12","thumbnail":{"data":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABUBAQEAAAAAAAAAAAAAAAAAAAIA/9oADAMBAAIQAxAAAAGayFw2MCX/xAAZEAEBAQEBAQAAAAAAAAAAAAABAgAREjH/2gAIAQEAAQUChfX3SCS81KXzf//EABgRAAIDAAAAAAAAAAAAAAAAAAACAREh/9oACAEDAQE/AWXSpP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ARn/xAAZEAACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQEABj8CRw1lj2P/xAAaEAEBAAIDAAAAAAAAAAAAAAABACExEUFh/9oACAEBAAE/IdyXOoUYytEWZA6vcDcG/9oADAMBAAIAAwAAABAbz//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QukHbGf/EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQIBAT8QRhUf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUXH/2gAIAQEAAT8Qs6TTbmIBBet/ZbKZpGIRupVCzDopjpZ//9k=","aspectRatio":1.560702875399361,"src":"/static/9ca88dc05bd71b46e2acaf2716c585c6/39109/header.jpg","srcSet":"/static/9ca88dc05bd71b46e2acaf2716c585c6/6a656/header.jpg 512w,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/6e4d3/header.jpg 1024w,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/39109/header.jpg 2048w,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/98367/header.jpg 3072w,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/8598b/header.jpg 3908w","sizes":"(max-width: 2048px) 100vw, 2048px"},"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABUBAQEAAAAAAAAAAAAAAAAAAAIA/9oADAMBAAIQAxAAAAGayFw2MCX/xAAZEAEBAQEBAQAAAAAAAAAAAAABAgAREjH/2gAIAQEAAQUChfX3SCS81KXzf//EABgRAAIDAAAAAAAAAAAAAAAAAAACAREh/9oACAEDAQE/AWXSpP/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ARn/xAAZEAACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQEABj8CRw1lj2P/xAAaEAEBAAIDAAAAAAAAAAAAAAABACExEUFh/9oACAEBAAE/IdyXOoUYytEWZA6vcDcG/9oADAMBAAIAAwAAABAbz//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QukHbGf/EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQIBAT8QRhUf/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUXH/2gAIAQEAAT8Qs6TTbmIBBet/ZbKZpGIRupVCzDopjpZ//9k=","width":300,"height":300,"src":"/static/9ca88dc05bd71b46e2acaf2716c585c6/b010e/header.jpg","srcSet":"/static/9ca88dc05bd71b46e2acaf2716c585c6/b010e/header.jpg 1x,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/7aec1/header.jpg 1.5x,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/39610/header.jpg 2x,\n/static/9ca88dc05bd71b46e2acaf2716c585c6/3881a/header.jpg 3x"}}}},"fields":{"slug":"/12-12-2018-octoprint-nginx-motion/"}}},"pageContext":{"slug":"/12-12-2018-octoprint-nginx-motion/"}}