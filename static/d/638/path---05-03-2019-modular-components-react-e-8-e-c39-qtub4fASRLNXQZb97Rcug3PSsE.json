{"data":{"post":{"id":"38a75cda-c64f-51fa-88b7-df1074b6aeb9","html":"<p>Do you remember <a href=\"https://reactjs.org/\">React</a> and how deep in love I am?</p>\n<p>Right then, today I come with <strong>modular components</strong>! Or as I call them to look\nfancy, <em>smart components</em>.</p>\n<h2>Smart, modular?</h2>\n<p>Well, a little disclaimer here: They're not named like that, nor is an official\nterm, is something that I've made up.</p>\n<p>But, what do I mean? Well, usually in react you will want to make either state\ncomponents, and not rely on any storage managers (Like <a href=\"https://redux.js.org/\">Redux</a>), you would\njust create a plain component:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token punctuation\">:</span> 'World\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">/* Render method */</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Hello </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Right? Well, and what if you don't want your component to handle the state? Just\nrely on an external state container:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> value <span class=\"token operator\">=</span> <span class=\"token string\">'World'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Hello </span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Fine, those are the typical methods you'll find around, internet is full of\nthem. But those methods do not fit into the app that I'm working on right now.</p>\n<h1>The smart component</h1>\n<p>To keep things modular, and not rely on a single store I came up with an idea:\nDivide the component into three parts, in a similar fashion to <a href=\"https://angular.io/\">Angular</a>,\n<strong>Style</strong>, <strong>View</strong> and <strong>Controller</strong>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1813c3ce6af0c9b070e80a7f9c95a278/e8a86/folder-structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 273px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.18315018315018%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABf0lEQVQoz32SaU4CQRCFOYISgdlEYLp79n3YMfGHMfEeXsLTP/uVDBoh/nip7srM66+W0WIRQiuN95cWkdEIQ4PlMoRSBlpHlxhFCVYrBc8L4PuPF/29j5SK0NUlPj/e0JcJ1ps9sqzAZrMTHQ4n9P1GYhTFmExmmM1ckev6F9PBeOTYpDN1MA4M7nWP2MSoqgbGxjhOkSSZ0DHyIebKskaa5kJ/Rej7cwSuCyfb4656lR93uz3yvERdt9hu92jbHk3Tyb3r1kJeFJV8e2Xo8eB6cFcJJrpFEidCSKqBkJEiFfM04/lWT8+GPryFwUTViO0PpCIhjdfrrZBRvNPseHyWvv5PGGZ4sIRZmklZJGDPaDBE9o4P8UcO5dbEvw09S/ikMVWVXREjhiyRJjzTiGeaUUEwx9QOcpg25Tjeb0KbMA3G2QllnkvJNGCZHAZLpTgMDoiPsBUUS2ckAE1/Sl4mmGq7LnbJ2zNhmhZiOJDxEeZpMpTPPuZ5ISvEvfwCrRwiaSwZGcYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Folder structure\"\n        title=\"\"\n        src=\"/static/1813c3ce6af0c9b070e80a7f9c95a278/e8a86/folder-structure.png\"\n        srcset=\"/static/1813c3ce6af0c9b070e80a7f9c95a278/78919/folder-structure.png 148w,\n/static/1813c3ce6af0c9b070e80a7f9c95a278/e8a86/folder-structure.png 273w\"\n        sizes=\"(max-width: 273px) 100vw, 273px\"\n      />\n  </span>\n  </a></p>\n<p>Don't get me wrong, I'm not trying to mimic Angular, I like react how it is. But\nsome times, you can mix the best (or simply what you like) from both worlds.</p>\n<h3>First layer: The style</h3>\n<p>Instead of relying in engines like <a href=\"http://lesscss.org/\">Less</a>, <a href=\"https://sass-lang.com/\">Sass</a> or just <a href=\"https://en.wikipedia.org/wiki/Cascading_Style_Sheets#CSS_3\">CSS</a>, I've\nimplemented the styling using <a href=\"https://emotion.sh/docs/introduction\">Emotion</a>, a great framework to make styles\ninside code.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'@emotion/styled'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Style container component.\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token string\">`\n  /* Your styles go here */\n`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Second layer: The fragment</h3>\n<p>Then, you just move away the representational logic from the component itself,\nthis part is just like delegating the <strong>render</strong> method to make your component\nmore readable, but still, having a re-usable view component.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyComponent.style'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Component fragment.\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponentFragment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> state <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style.MyComponent</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Some </span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style.MyComponent</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Third layer: The controller</h3>\n<p>Finally, the last layer: The controller component. This one uses the fragment\nto represent the component, passing the state from itself to the fragment by\nit's props.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> MyComponentFragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyComponentFragment'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> <span class=\"token string\">'Your state'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>MyComponentFragment<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Do you remember that I said that I didn't want to use state management libraries\nand stuff like that? Well, I lied. This is what you could call a <em>design\npattern</em>, and in fact, it does not eliminate the use of things like Redux, it\ncan be used along!</p>\n<h1>TL;DR</h1>\n<p>Okay, summarizing, what I'm presenting you is a simple design pattern that\ndivides a component into three parts: <strong>Style</strong>, <strong>View</strong> and <strong>Controller</strong>.</p>\n<ul>\n<li><strong>Style</strong>: A styled component using <a href=\"https://emotion.sh/docs/introduction\">Emotion js</a> or similar.</li>\n<li><strong>Fragment</strong>: A stateless component that uses the style container.</li>\n<li><strong>Controller</strong>: A state component that uses the fragment in the render method.</li>\n</ul>\n<p>In that way, you don't have everything in the same module or component, making\nthe whole thing more maintainable plus you gain re-usability from each part.</p>\n<h2>Final words</h2>\n<p>This idea came to my mind when designing the structure of an app that <em>I'm\nworking on right now</em>, it's a collaborative project with a friend of mine. More\nabout the project will be leaked in the course of the following months!</p>\n<p>Spoiler: It's about creating an IDE, but of what kind? You will see soon!</p>\n<!-- Links -->","excerpt":"Do you remember  React  and how deep in love I am? Right then, today I come with  modular components ! Or as I call them to look\nfancy,  smart components . Smart, modular? Well, a little disclaimer here: They're not named like that, nor is an…","meta":{"title":"React modular components","tags":["programming","react"],"date":"March 06, 2019 at 20:03","thumbnail":{"data":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACO0lEQVQoz12S204TURSG+xLS0nZm9uyZqW1pK/QUSo8IQzqWhIMEqShgLSQcCwbDDRpiwo0mRuNz+ABee+WN8XW8+twzaC1c/Fl7/XvtP2vt9YeklJgjkMLATGcQjQVkNII0TYz24wCmEMhYBKMxh0il1J3K/Xeqxo8+Qv8OQ1IJSieB2XBv+MkiYmElgPmggLBM7NY6STuLocUwxG3RkDmSCMNAMwR6sUr80Tpas4222MWstNCnaySXD9lf+UF3+yeN+VO86iqT2Rzi73tfJyRHxFLqsrS+TaY5T669RGZlk2R5BlmsYObLJAo1eiffuej9ouTukt84IZnJEYtGh6JBh5ZloUXHqa9u8OrNFYO9PgfnFxx/+MLa8x3C3UPG1g/Qkzbxr22s3SKlokP+yQJTa894WK8xkcki1PiBoFSCejxOsTWP1z/E63RoP9nEO3qN21lk7uURi/unTFZn0d9+wxh8ItHc4f7GFU6pQjadwnac2yPrauRyocDT7RdsDc7pX39k9917upfXbB2f0Ts9Y7p/Qbz3G3EJiaXP5Gf3mGu1cF2XdDp90+HohnzRaHiMsKYTrblEpEO4VCfc8Bire2hqOXKqjFi+wkqrJdl2MGomk8EZdnjHNpaK1kQusI0dG8fW45ie8qC3htTiyMg9xEwVM5lUi9QxVBM+hrYZFQz+04+2g2h5mLk8ou4ippsKjeAceLHVCWrkiKH/22aUCGAhdQ1RaaJvDYLo51J1OuSUuM8FtXdE/wAJ/GHhsaFTIwAAAABJRU5ErkJggg==","aspectRatio":1.7777777777777777,"src":"/static/1a7e9a68fd93cca36c23197f171e9f87/7ae96/react-header1.png","srcSet":"/static/1a7e9a68fd93cca36c23197f171e9f87/d6f73/react-header1.png 512w,\n/static/1a7e9a68fd93cca36c23197f171e9f87/21c41/react-header1.png 1024w,\n/static/1a7e9a68fd93cca36c23197f171e9f87/7ae96/react-header1.png 1920w","sizes":"(max-width: 1920px) 100vw, 1920px"},"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACO0lEQVQoz12S204TURSG+xLS0nZm9uyZqW1pK/QUSo8IQzqWhIMEqShgLSQcCwbDDRpiwo0mRuNz+ABee+WN8XW8+twzaC1c/Fl7/XvtP2vt9YeklJgjkMLATGcQjQVkNII0TYz24wCmEMhYBKMxh0il1J3K/Xeqxo8+Qv8OQ1IJSieB2XBv+MkiYmElgPmggLBM7NY6STuLocUwxG3RkDmSCMNAMwR6sUr80Tpas4222MWstNCnaySXD9lf+UF3+yeN+VO86iqT2Rzi73tfJyRHxFLqsrS+TaY5T669RGZlk2R5BlmsYObLJAo1eiffuej9ouTukt84IZnJEYtGh6JBh5ZloUXHqa9u8OrNFYO9PgfnFxx/+MLa8x3C3UPG1g/Qkzbxr22s3SKlokP+yQJTa894WK8xkcki1PiBoFSCejxOsTWP1z/E63RoP9nEO3qN21lk7uURi/unTFZn0d9+wxh8ItHc4f7GFU6pQjadwnac2yPrauRyocDT7RdsDc7pX39k9917upfXbB2f0Ts9Y7p/Qbz3G3EJiaXP5Gf3mGu1cF2XdDp90+HohnzRaHiMsKYTrblEpEO4VCfc8Bire2hqOXKqjFi+wkqrJdl2MGomk8EZdnjHNpaK1kQusI0dG8fW45ie8qC3htTiyMg9xEwVM5lUi9QxVBM+hrYZFQz+04+2g2h5mLk8ou4ippsKjeAceLHVCWrkiKH/22aUCGAhdQ1RaaJvDYLo51J1OuSUuM8FtXdE/wAJ/GHhsaFTIwAAAABJRU5ErkJggg==","width":300,"height":300,"src":"/static/1a7e9a68fd93cca36c23197f171e9f87/fce89/react-header1.png","srcSet":"/static/1a7e9a68fd93cca36c23197f171e9f87/fce89/react-header1.png 1x,\n/static/1a7e9a68fd93cca36c23197f171e9f87/64f79/react-header1.png 1.5x,\n/static/1a7e9a68fd93cca36c23197f171e9f87/3a468/react-header1.png 2x,\n/static/1a7e9a68fd93cca36c23197f171e9f87/7adea/react-header1.png 3x"}}}},"fields":{"slug":"/05-03-2019-modular-components-react/"}}},"pageContext":{"slug":"/05-03-2019-modular-components-react/"}}